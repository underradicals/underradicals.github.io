import{_ as t,c as o,o as a,ah as i}from"./chunks/framework.BaqsfJuc.js";const p=JSON.parse('{"title":"Roles","description":"","frontmatter":{"layout":"doc"},"headers":[],"relativePath":"docs/postgres/roles.md","filePath":"docs/postgres/roles.md"}'),s={name:"docs/postgres/roles.md"};function r(l,e,d,n,c,h){return a(),o("div",null,[...e[0]||(e[0]=[i('<h1 id="roles" tabindex="-1">Roles <a class="header-anchor" href="#roles" aria-label="Permalink to “Roles”">​</a></h1><div class="tip custom-block"><p class="custom-block-title">Ownership</p><blockquote><h4 id="ownership-answers-who-controls-and-can-drop-the-object" tabindex="-1">Ownership answers who controls and can drop the object. <a class="header-anchor" href="#ownership-answers-who-controls-and-can-drop-the-object" aria-label="Permalink to “Ownership answers who controls and can drop the object.”">​</a></h4></blockquote></div><div class="tip custom-block"><p class="custom-block-title">Privileges</p><blockquote><h4 id="privileges-defines-who-may-read-or-modify-the-object" tabindex="-1">Privileges defines who may read or modify the object. <a class="header-anchor" href="#privileges-defines-who-may-read-or-modify-the-object" aria-label="Permalink to “Privileges defines who may read or modify the object.”">​</a></h4></blockquote></div><h2 id="database-objects" tabindex="-1">Database Objects <a class="header-anchor" href="#database-objects" aria-label="Permalink to “Database Objects”">​</a></h2><p>A <strong>POPO</strong> (Plain Ole PostgreSQL Object) or Database Object for short, is any named, persistent entity on which the database system stores, manages and enforces ownwership and privileges. These <code>POPO</code>&#39;s fall into several categories:</p><ol><li>Structural Objects</li><li>Programmable Objects</li><li>Security and Access Control Objects</li><li>Dependency and Integration Objects</li></ol><h3 id="structural-objects" tabindex="-1">Structural Objects <a class="header-anchor" href="#structural-objects" aria-label="Permalink to “Structural Objects”">​</a></h3><p>These objects define how data is organized and stored. These objects include databases themselves, schemas, tables, partioned tables, views, and materialized views, indexes, sequences and foreign tables.</p><h3 id="programmable-objects" tabindex="-1">Programmable Objects <a class="header-anchor" href="#programmable-objects" aria-label="Permalink to “Programmable Objects”">​</a></h3><p>These objects encapsulate logic that runs inside the database engine itself. These objects include functions, procedures, aggregates, operators, operator classes, triggers, and trigger functions. These objects are owned by a role and execute with defined security and execution semantics.</p><h3 id="security-and-access-control-objects" tabindex="-1">Security and Access Control Objects <a class="header-anchor" href="#security-and-access-control-objects" aria-label="Permalink to “Security and Access Control Objects”">​</a></h3><p>Third, security and access-control objects manage authentication, authorization, and access paths. Roles (both login and group roles), privileges, default privileges, and row-level security (RLS) policies fall into this category. While roles themselves are objects, privileges are properties attached to other objects.</p><h3 id="dependency-and-integration-objects" tabindex="-1">Dependency and Integration Objects <a class="header-anchor" href="#dependency-and-integration-objects" aria-label="Permalink to “Dependency and Integration Objects”">​</a></h3><p>Fourth, dependency and integration objects support data relationships and extensions. Examples include constraints (primary keys, foreign keys, check constraints), collations, conversions, text search configurations, dictionaries, parsers, templates, extensions, and event triggers.</p><h3 id="ownership" tabindex="-1">Ownership <a class="header-anchor" href="#ownership" aria-label="Permalink to “Ownership”">​</a></h3><p>When a db object is created, it is assigned an owner. The owner is the Role that executed the creation statement. At the initial creation of the object, no one can do anything with the object except the Role that created the object and the <code>Superuser</code>. In order to allow other roles to use the db object, privileges must be granted. Almost every database object has an owner, which is a role. The owner has implicit full control over the object. If a role owns any object, PostgreSQL will not allow that role to be dropped until ownership is transferred or the object is removed.</p><h3 id="privileges" tabindex="-1">Privileges <a class="header-anchor" href="#privileges" aria-label="Permalink to “Privileges”">​</a></h3><p>Objects can depend on one another and have privileges granted to roles. Even if a role does not own an object, having privileges or default privileges associated with it can still block certain administrative actions (for example, dropping a role).</p><h4 id="privilege-examples" tabindex="-1">Privilege Examples <a class="header-anchor" href="#privilege-examples" aria-label="Permalink to “Privilege Examples”">​</a></h4><ul><li>SELECT <ul><li>Allows <code>SELECT</code> from any column, or specific column(s), of a table, view, materialized view, or other table-like object. Also allows use of <code>COPY TO</code>. This privilege is also needed to reference existing column values in <code>UPDATE</code>, <code>DELETE</code>, or <code>MERGE</code>. For sequences, this privilege also allows use of the currval function. For large objects, this privilege allows the object to be read.</li></ul></li><li>INSERT <ul><li>Allows <code>INSERT</code> of a new row into a table, view, etc. Can be granted on specific column(s), in which case only those columns may be assigned to in the <code>INSERT</code> command (other columns will therefore receive default values). Also allows use of <code>COPY FROM</code>.</li></ul></li><li>UPDATE <ul><li>Allows <code>UPDATE</code> of any column, or specific column(s), of a table, view, etc. (In practice, any nontrivial UPDATE command will require SELECT privilege as well, since it must reference table columns to determine which rows to update, and/or to compute new values for columns.) <code>SELECT</code> ... FOR <code>UPDATE</code> and <code>SELECT</code> ... <code>FOR SHARE</code> also require this privilege on at least one column, in addition to the <code>SELECT</code> privilege. For sequences, this privilege allows use of the nextval and setval functions. For large objects, this privilege allows writing or truncating the object.</li></ul></li><li>DELETE <ul><li>Allows <code>DELETE</code> of a row from a table, view, etc. (In practice, any nontrivial <code>DELETE</code> command will require <code>SELECT</code> privilege as well, since it must reference table columns to determine which rows to delete.)</li></ul></li><li>TRUNCATE <ul><li>Allows <code>TRUNCATE</code> on a table.</li></ul></li><li>REFERENCES <ul><li>Allows creation of a foreign key constraint referencing a table, or specific column(s) of a table.</li></ul></li><li>TRIGGER <ul><li>Allows creation of a trigger on a table, view, etc.</li></ul></li><li>CREATE <ul><li>For databases, allows new schemas and publications to be created within the database, and allows trusted extensions to be installed within the database. For schemas, allows new objects to be created within the schema. To rename an existing object, you must own the object and have this privilege for the containing schema. For tablespaces, allows tables, indexes, and temporary files to be created within the tablespace, and allows databases to be created that have the tablespace as their default tablespace. Note that revoking this privilege will not alter the existence or location of existing objects.</li></ul></li><li>CONNECT <ul><li>Allows the grantee to connect to the database. This privilege is checked at connection startup (in addition to checking any restrictions imposed by pg_hba.conf).</li></ul></li><li>TEMPORARY <ul><li>Allows temporary tables to be created while using the database.</li></ul></li><li>EXECUTE <ul><li>Allows calling a function or procedure, including use of any operators that are implemented on top of the function. This is the only type of privilege that is applicable to functions and procedures.</li></ul></li><li>USAGE <ul><li>For procedural languages, allows use of the language for the creation of functions in that language. This is the only type of privilege that is applicable to procedural languages.</li><li>For schemas, allows access to objects contained in the schema (assuming that the objects&#39; own privilege requirements are also met). Essentially this allows the grantee to “look up” objects within the schema. Without this permission, it is still possible to see the object names, e.g., by querying system catalogs. Also, after revoking this permission, existing sessions might have statements that have previously performed this lookup, so this is not a completely secure way to prevent object access.</li><li>For sequences, allows use of the currval and nextval functions.</li><li>For types and domains, allows use of the type or domain in the creation of tables, functions, and other schema objects. (Note that this privilege does not control all “usage” of the type, such as values of the type appearing in queries. It only prevents objects from being created that depend on the type. The main purpose of this privilege is controlling which users can create dependencies on a type, which could prevent the owner from changing the type later.)</li><li>For foreign-data wrappers, allows creation of new servers using the foreign-data wrapper.</li><li>For foreign servers, allows creation of foreign tables using the server. Grantees may also create, alter, or drop their own user mappings associated with that server.</li></ul></li><li>SET <ul><li>Allows a server configuration parameter to be set to a new value within the current session. (While this privilege can be granted on any parameter, it is meaningless except for parameters that would normally require superuser privilege to set.)</li></ul></li><li>ALTER SYSTEM <ul><li>Allows a server configuration parameter to be configured to a new value using the ALTER SYSTEM command.</li></ul></li><li>MAINTAIN <ul><li>Allows <code>VACUUM</code>, <code>ANALYZE</code>, <code>CLUSTER</code>, <code>REFRESH</code> <code>MATERIALIZED</code> <code>VIEW</code>, <code>REINDEX</code>, <code>LOCK</code> <code>TABLE</code>, and database object statistics manipulation functions on a relation.</li></ul></li></ul><h3 id="postgres-roles" tabindex="-1">Postgres Roles <a class="header-anchor" href="#postgres-roles" aria-label="Permalink to “Postgres Roles”">​</a></h3><p>PostgreSQL manages access to the database by assigning permissions using <code>Roles</code>. A <code>Role</code> is either a database user, group of users or both. Roles can own database objects and can assign privileges on those objects to other roles to control who has access to which objects. PostgreSQL also lets you grant membership in a role to another role allowing the DBA to define whatever measure of granularity he/she wishes.</p><h4 id="acl-privilege-abbreviations" tabindex="-1">ACL Privilege Abbreviations <a class="header-anchor" href="#acl-privilege-abbreviations" aria-label="Permalink to “ACL Privilege Abbreviations”">​</a></h4><table tabindex="0"><thead><tr><th>Privilege</th><th>Abbreviation</th><th>Applicable Object Types</th></tr></thead><tbody><tr><td>SELECT</td><td>r (“read”)</td><td>LARGE OBJECT, SEQUENCE, TABLE (and table-like objects), table column</td></tr><tr><td>INSERT</td><td>a (“append”)</td><td>TABLE, table column</td></tr><tr><td>UPDATE</td><td>w (“write”)</td><td>LARGE OBJECT, SEQUENCE, TABLE, table column</td></tr><tr><td>DELETE</td><td>d</td><td>TABLE</td></tr><tr><td>TRUNCATE</td><td>D</td><td>TABLE</td></tr><tr><td>REFERENCES</td><td>x</td><td>TABLE, table column</td></tr><tr><td>TRIGGER</td><td>t</td><td>TABLE</td></tr><tr><td>CREATE</td><td>C</td><td>DATABASE, SCHEMA, TABLESPACE</td></tr><tr><td>CONNECT</td><td>c</td><td>DATABASE</td></tr><tr><td>TEMPORARY</td><td>T</td><td>DATABASE</td></tr><tr><td>EXECUTE</td><td>X</td><td>FUNCTION, PROCEDURE</td></tr><tr><td>USAGE</td><td>U</td><td>DOMAIN, FOREIGN DATA WRAPPER, FOREIGN SERVER, LANGUAGE, SCHEMA, SEQUENCE, TYPE</td></tr><tr><td>SET</td><td>s</td><td>PARAMETER</td></tr><tr><td>ALTER SYSTEM</td><td>A</td><td>PARAMETER</td></tr><tr><td>MAINTAIN</td><td>m</td><td>TABLE</td></tr></tbody></table><h4 id="summary-of-access-privileges" tabindex="-1">Summary of Access Privileges <a class="header-anchor" href="#summary-of-access-privileges" aria-label="Permalink to “Summary of Access Privileges”">​</a></h4><table tabindex="0"><thead><tr><th>Object Type</th><th>All Privileges</th><th>Default PUBLIC Privileges</th><th>psql Command</th></tr></thead><tbody><tr><td>DATABASE</td><td>CTc</td><td>Tc</td><td>\\l</td></tr><tr><td>DOMAIN</td><td>U</td><td>U</td><td>\\dD+</td></tr><tr><td>FUNCTION or PROCEDURE</td><td>X</td><td>X</td><td>\\df+</td></tr><tr><td>FOREIGN DATA WRAPPER</td><td>U</td><td>none</td><td>\\dew+</td></tr><tr><td>FOREIGN SERVER</td><td>U</td><td>none</td><td>\\des+</td></tr><tr><td>LANGUAGE</td><td>U</td><td>U</td><td>\\dL+</td></tr><tr><td>LARGE OBJECT</td><td>rw</td><td>none</td><td>\\dl+</td></tr><tr><td>PARAMETER</td><td>sA</td><td>none</td><td>\\dconfig+</td></tr><tr><td>SCHEMA</td><td>UC</td><td>none</td><td>\\dn+</td></tr><tr><td>SEQUENCE</td><td>rwU</td><td>none</td><td>\\dp</td></tr><tr><td>TABLE (and table-like objects)</td><td>arwdDxtm</td><td>none</td><td>\\dp</td></tr><tr><td>Table column</td><td>arwx</td><td>none</td><td>\\dp</td></tr><tr><td>TABLESPACE</td><td>C</td><td>none</td><td>\\db+</td></tr><tr><td>TYPE</td><td>U</td><td>U</td><td>\\dT+</td></tr></tbody></table><blockquote><p>The privileges applicable to a particular object vary depending on the object&#39;s type<br> --- PostgreSQL Docs</p></blockquote><p>The right to modify or destroy an object is inherent in being the object&#39;s owner and cannot be granted or revoked in itself, however it can be inherited by members of the owning role.</p>',28)])])}const u=t(s,[["render",r]]);export{p as __pageData,u as default};
